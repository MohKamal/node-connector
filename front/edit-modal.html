<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Modal</title>
    <style>
      /* styles.css */

      /* General Body Styling */
      body {
        font-family: "Arial", sans-serif;
        background-color: #f9f9f9; /* Light gray background */
        color: #333; /* Dark text */
        margin: 0;
        padding: 0;
      }

      /* Button Styling */
      button {
        background-color: #ffffff; /* White background */
        border: 1px solid #ccc; /* Subtle border */
        color: #333;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      button:hover {
        background-color: #f0f0f0; /* Slightly darker on hover */
        border-color: #aaa; /* Darker border on hover */
      }

      /* Modal Styling */
      .node-modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3); /* Semi-transparent overlay */
      }

      .node-modal-content {
        background-color: #ffffff; /* White background */
        margin: 10% auto;
        padding: 20px;
        border-radius: 8px;
        width: 400px;
        max-width: 90%;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow */
        position: relative;
      }

      .node-modal-content h2 {
        color: #333; /* Dark heading */
        margin-bottom: 20px;
        text-align: center;
      }

      .node-modal-close {
        position: absolute;
        right: 10px;
        top: 5px;
        color: #aaa; /* Gray close button */
        font-size: 24px;
        cursor: pointer;
      }

      .node-modal-close:hover {
        color: #333; /* Darker gray on hover */
      }

      /* Form Styling */
      #node-modal-editForm div {
        margin-bottom: 15px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333; /* Dark labels */
      }

      input[type="text"],
      input[type="checkbox"] {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
        background-color: #f9f9f9; /* Light gray input background */
        border: 1px solid #ccc; /* Subtle border */
        color: #333; /* Dark text */
        font-family: "Arial", sans-serif;
        border-radius: 4px;
      }

      input[type="text"]:focus,
      input[type="checkbox"]:focus {
        outline: none;
        border-color: #aaa; /* Darker border on focus */
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* Subtle glow effect */
      }

      /* Save Changes Button */
      #node-modal-saveChanges {
        background-color: #ffffff; /* White background */
        color: #333;
        border: 1px solid #ccc; /* Subtle border */
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      #node-modal-saveChanges:hover {
        background-color: #f0f0f0; /* Slightly darker on hover */
        border-color: #aaa; /* Darker border on hover */
      }
    </style>
  </head>
  <body>
    <!-- Button to Open Modal -->
    <button id="openModalBtn">Edit Object</button>

    <!-- Modal Container -->
    <div id="node-modal" class="node-modal">
      <div class="node-modal-content">
        <span class="node-modal-close">&times;</span>
        <h2>Edit Object</h2>
        <form id="node-modal-editForm"></form>
        <button type="button" id="node-modal-saveChanges">Save Changes</button>
      </div>
    </div>

    <script>
      // script.js

      // Sample object to edit
      const objectToEdit = {
        name: "John Doe",
        age: 30,
        email: "john.doe@example.com",
        isAdmin: true,
      };

      // DOM Elements
      const openModalBtn = document.getElementById("openModalBtn");
      const modal = document.getElementById("node-modal");
      const closeBtn = document.querySelector(".close");
      const saveChangesBtn = document.getElementById("saveChanges");
      const editForm = document.getElementById("editForm");

      // Function to open the node-modal
      openModalBtn.addEventListener("click", () => {
        modal.style.display = "block";
        populateForm(objectToEdit);
      });

      // Function to close the node-modal
      closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });

      // Close node-modal when clicking outside of it
      window.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      });

      // Function to populate the form dynamically
      function populateForm(obj) {
        editForm.innerHTML = ""; // Clear previous inputs

        for (const key in obj) {
          if (obj.hasOwnProperty(key)) {
            const value = obj[key];

            // Create a label
            const label = document.createElement("label");
            label.textContent = key.charAt(0).toUpperCase() + key.slice(1); // Capitalize the first letter
            label.setAttribute("for", key);

            // Create an input field
            const input = document.createElement("input");
            input.id = key;
            input.name = key;

            // Handle different data types
            if (typeof value === "boolean") {
              input.type = "checkbox";
              input.checked = value;
            } else {
              input.type = "text";
              input.value = value;
            }

            // Append label and input to the form
            const div = document.createElement("div");
            div.appendChild(label);
            div.appendChild(input);
            editForm.appendChild(div);
          }
        }
      }

      // Save changes and update the object
      saveChangesBtn.addEventListener("click", () => {
        const formData = new FormData(editForm);

        for (const [key, value] of formData.entries()) {
          if (objectToEdit.hasOwnProperty(key)) {
            if (typeof objectToEdit[key] === "boolean") {
              objectToEdit[key] = value === "on"; // Checkbox handling
            } else {
              objectToEdit[key] = value;
            }
          }
        }

        console.log("Updated Object:", objectToEdit);
        modal.style.display = "none"; // Close the node-modal after saving
      });
    </script>
  </body>
</html>
